{"version":3,"sources":["when.js","type-writer.js","seek-able.js","elements.ts","../../../.nvm/versions/node/v12.3.1/lib/node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["defaultContext","add","addAnimator","remove","removeAnimator","unattached","_","always","When","condition","ctx","new","target","running","_handlers","start","frame","at","end","changed","_resetDone","_ctx","fire","type","cb","push","ts","currentBuild","lastBuild","cbs","count","length","i","apply","Object","assign","prototype","map","done","Promise","_resolveDone","withName","name","withDuration","duration","step","shouldRun","match","_fire_start","startedAt","_fire_end","endedAt","_fire_changed","_fire_frame","t","_fire_at","For","endTime","anim","every","interval","lastTick","currentTick","Math","floor","sec","seconds","symbol","Symbol","toPrimitive","defineProperty","Number","get","valueOf","String","lerp","from","to","delta","global","__animators","__cascadeDebug","debug","log","console","debuggingOff","table","animator","animators","idx","indexOf","splice","runAnimatorStep","prevBuild","Function","HTMLElement","current","buildInRange","order","any","matchers","next","some","m","ceil","TypeWriter","observedAttributes","constructor","shadow","attachShadow","mode","text","document","createTextNode","cursor","createElement","style","textContent","className","appendChild","textNode","currentTargetText","input","rate","typingRate","startText","classList","substr","erase","erasingRate","attributeChangedCallback","oldValue","newValue","setText","newText","currentText","prefixLength","commonPrefix","getComputedStyle","getPropertyValue","a","b","customElements","define","module","hot","accept","Seekable","MediaBase","SeekAble","seekTo","seekDuration","time","currentTime","playbackRate","paused","setFinalState","pause","play","remaining","targetRate","min","max","HTMLVideoElement","extends","HTMLAudioElement","OVERLAY_ID","OldModule","bundle","Module","moduleName","call","data","hotData","_acceptCallbacks","_disposeCallbacks","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","id","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","deps","cached","cache"],"mappings":"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","file":"elements.b4e7f8a2.js","sourceRoot":"..","sourcesContent":["export const defaultContext = {\n  add: addAnimator,\n  remove: removeAnimator,\n}\n\nexport const unattached = {\n  add: _ => {},\n  remove: _ => {}\n}\n\nexport function always() { return true }\n\nexport function When(condition=always, ctx=defaultContext) {\n  if (new.target == null) return new When(condition, ctx)\n  this.condition = condition\n  this.running = false\n\n  this._handlers = {start: [], frame: [], at: [], end: [], changed: []}\n  this._resetDone()\n  this._ctx = ctx\n  ctx.add && ctx.add(this)\n}\n\nconst fire = type => ({\n  [type](cb) { this._handlers[type].push(cb); return this },\n  [`_fire_${type}`](ts, currentBuild, lastBuild) {\n    const cbs = this._handlers[type]\n    const count = cbs.length\n    for (let i = 0; i !== count; ++i)\n      cbs[i].apply(this, [ts, currentBuild, lastBuild])\n  }\n})\n\nObject.assign(When.prototype, ...['start', 'frame', 'at', 'end', 'changed'].map(fire))\n\nWhen.prototype._resetDone = function() {\n  this.done = new Promise(_ => this._resolveDone = _)\n}\n\nWhen.prototype.withName = function(name) {\n  this.name = name\n  return this\n}\n\nWhen.prototype.withDuration = function(duration) {\n  this.duration = duration\n  return this\n}\n\nWhen.prototype.remove = function() {\n  this._ctx.remove(this)\n  return this\n}\n\nWhen.prototype.step = function(ts, currentBuild, lastBuild) {\n  const shouldRun = this.condition[match](ts, currentBuild, lastBuild)\n  if (shouldRun && !this.running) {\n    this._fire_start(ts, currentBuild, lastBuild)\n    this.startedAt = ts\n    this.running = true\n  }\n  if (!shouldRun && this.running) {\n    this._fire_end(ts, currentBuild, lastBuild)\n    this.endedAt = ts\n    this.running = false\n    this._resolveDone(this)\n    this._resetDone()\n  }\n  if (this.running) {\n    if (currentBuild !== lastBuild) this._fire_changed(ts, currentBuild, lastBuild)\n    this._fire_frame(ts, currentBuild, lastBuild)\n    if (typeof this.duration === 'number') {\n      const t = (ts - this.startedAt) / this.duration\n      this.t = t\n      this._fire_at(t, currentBuild, lastBuild)\n    }\n  }\n}\n\nexport const For = (duration, ctx=defaultContext) => {\n  let endTime  \n  const anim =\n    When(ts => !anim.running || ts < endTime, ctx).withDuration(duration)\n      .start(ts => endTime = ts + duration)\n      .end(() => ctx.remove(anim))\n  return anim\n}\n\nexport const every = interval => {\n  let lastTick = null\n  return cb => function (ts, currentBuild, lastBuild) {\n    const currentTick = Math.floor((ts - this.startedAt) / interval)\n    if (currentTick !== lastTick)\n      cb.apply(this, [ts, currentTick, currentBuild, lastBuild])\n    lastTick = currentTick\n  }\n}\n\n/****** Unit utilities ******/\nexport const sec = seconds => 1000 * seconds\nsec.symbol = Symbol('seconds')\nsec[Symbol.toPrimitive] = () => sec.symbol\nObject.defineProperty(Number.prototype, sec, {\n  get() { return sec(this.valueOf()) }\n})\nObject.defineProperty(String.prototype, sec, {\n  get() { return sec(+this) }\n})\n\n/****** Animation utils ******/\nexport const lerp = (from, to, map=_=>_) => {\n  const delta = to - from\n  return t => map(from + t * delta)\n}\n\n/****** Animator framework ******/\nglobal.__animators = global.__animators || []\nglobal.__cascadeDebug = (debug=true) =>\n  debug\n    ? log = console\n    : log = debuggingOff\n\nconst debuggingOff = { log() {}, table() {}, }\nlet log = debuggingOff\n\nexport function addAnimator(animator) {\n  global.__animators.push(animator)\n  log.log('added animator', animator)\n  log.table(global.__animators)\n}\nexport function removeAnimator(animator) {\n  const animators = global.__animators\n  const idx = animators.indexOf(animator)\n  if (idx >= 0)\n    animators.splice(idx, 1)\n  animator._resolveDone()\n}\nexport const runAnimatorStep = (ts, currentBuild, prevBuild) => {\n  const animators = global.__animators\n  let i = animators.length; while (i --> 0) \n    animators[i].step(ts, currentBuild, prevBuild)\n}\n\n/****** Condition helpers ******/\nexport const match = Symbol('when/match')\nObject.defineProperty(Function.prototype, match, { get() { return this } })\n\nHTMLElement.prototype[match] = function(_, current) {\n  return current === this\n}\n\nexport const buildInRange = (from, to) =>\n  (ts, current) =>\n    current &&\n    current.order >= from.order &&\n    current.order <= to.order\n\nexport const any = (...matchers) => (ts, current, next) =>\n  matchers.some(m => m [match] (ts, current, next))","import {For, sec, lerp} from './when'\n\nconst {ceil, floor} = Math\n\nclass TypeWriter extends HTMLElement {\n  static get observedAttributes() { return ['text'] }\n\n  constructor() {\n    super()\n    const shadow = this.attachShadow({mode: 'open'});\n    const text = document.createTextNode('')\n    const cursor = document.createElement('span')\n    const style = document.createElement('style')\n    style.textContent = TypeWriter.style\n    cursor.className = 'blinking cursor'\n    shadow.appendChild(style)\n    shadow.appendChild(text)\n    shadow.appendChild(cursor)\n    this.cursor = cursor\n    this.textNode = text\n    this.currentTargetText = ''\n  }\n\n  type(input, rate=this.typingRate) {\n    const {textNode: text} = this\n    const startText = text.textContent\n    if (this.anim) this.anim.remove()\n    return this.anim =\n      For(input.length [sec] / rate)\n        .withName('typing')\n        .start(() => this.cursor.classList.remove('blinking'))\n        .at(t =>\n          text.textContent = startText + input.substr(0, ceil(t * input.length))\n        )\n        .end(() => {\n          this.cursor.classList.add('blinking')\n          text.textContent = startText + input\n        })\n  }\n\n  erase(count=this.textNode.textContent.length, rate=this.erasingRate) {\n    const {textNode: text} = this\n    const startText = text.textContent\n    const length = lerp(startText.length, startText.length - count)\n    if (this.anim) this.anim.remove()\n    return this.anim =\n      For(count [sec] / rate)\n        .withName('erasing')\n        .start(() => this.cursor.classList.remove('blinking'))\n        .at(t =>\n          text.textContent = startText.substr(0, floor(length(t)))\n        )\n        .end(() => {\n          text.textContent = startText.substr(0, startText.length - count)\n          this.cursor.classList.add('blinking')\n        })\n  }\n\n  async attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'text') this.setText(newValue)\n  }\n\n  set text(newText) {\n    this.setText(newText)\n  }\n\n  get text() {\n    return this.textNode.textContent\n  }\n\n  async setText(newText) {\n    const {textNode} = this\n    if (this.currentTargetText === newText) return\n    this.currentTargetText = newText\n    const currentText = this.text\n    const prefixLength = commonPrefix(currentText, newText)\n    const delta = currentText.length - prefixLength\n    if (delta) await this.erase(delta).done\n    this.type(newText.substr(prefixLength))\n  }\n\n  get typingRate() {\n    return +getComputedStyle(this).getPropertyValue('--typewriter-typing-rate') || 32;\n  }\n\n  get erasingRate() {\n    return +getComputedStyle(this).getPropertyValue('--typewriter-erasing-rate') || 60;\n  }\n}\n\nconst commonPrefix = (a, b) => {\n  for (let i = 0; i != a.length; ++i) {\n    if(a[i] !== b[i]) return i\n  }\n  return a.length\n}\n\nTypeWriter.style = `\n.cursor {\n  display: inline-block;\n  background: var(--typewriter-cursor-color);\n  width: 2px;\n  height: 1.2em;\n  position: relative;\n  top: 0.2em;\n}\n\n.cursor.blinking {\n  animation-name: blink;\n  animation-duration: var(--typewriter-cursor-blink-rate);\n  animation-iteration-count: infinite;\n}\n\n@keyframes blink {\n  0% { opacity: 1; }\n  50% { opacity: 1; }\n  60% { opacity: 0; }\n  90% { opacity: 0; }\n  100% { opacity: 1; }\n}\n`\n\ncustomElements.define('type-writer', TypeWriter)\n\nif (module.hot) module.hot.accept(() => false)","import {defaultContext, For, every, sec} from './when'\n\nconst Seekable = MediaBase => class SeekAble extends MediaBase {\n  seekTo({duration: seekDuration=1, time=this.currentTime, playbackRate=this.playbackRate, paused=this.paused}) {\n    if (this.anim) { this.anim.remove(); this.anim = null }\n    if (!seekDuration || time < this.currentTime)\n      this.currentTime = time\n    const setFinalState = () => {\n      this.currentTime = time\n      this.playbackRate = playbackRate\n      if (typeof paused !== 'undefined')\n        paused ? this.pause() : this.play()\n    }\n    if (seekDuration && this.currentTime !== time) {\n      if (this.paused) this.play()\n      let endTime = null\n      const duration = seekDuration[sec]\n      return this.anim = For(seekDuration[sec]).withName('seekVideo')\n        .start(ts => endTime = ts + duration)\n        .frame(every(0.5[sec]) (ts => {\n          const remaining = endTime - ts\n          const delta = (time - this.currentTime)[sec]\n          const targetRate = Math.min(Math.max(delta / remaining, 0.1), 5)\n          this.playbackRate = targetRate\n        }))\n        .end(setFinalState)\n    }\n    setFinalState()\n  }\n}\n\ncustomElements.define('seekable-video', Seekable(HTMLVideoElement), {extends: 'video'})\ncustomElements.define('seekable-audio', Seekable(HTMLAudioElement), {extends: 'audio'})","import {When, For, buildInRange, always, lerp, every, sec, any, match} from './when'\nObject.assign(global, {When, For, buildInRange, always, every, sec, lerp, any, match})\n\nimport './type-writer'\nimport './seek-able'\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}