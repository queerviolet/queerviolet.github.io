{"mappings":"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","sources":["./Users/queerviolet/Desktop/hack/constellation.talk/node_modules/@parcel/scope-hoisting/lib/helpers.js","./when.js","./type-writer.js","./seek-able.js","./elements.ts"],"sourcesContent":[null,"export const defaultContext = {\n  add: addAnimator,\n  remove: removeAnimator,\n}\n\nexport const unattached = {\n  add: _ => {},\n  remove: _ => {}\n}\n\nexport function always() { return true }\n\nexport function When(condition=always, ctx=defaultContext) {\n  if (new.target == null) return new When(condition, ctx)\n  this.condition = condition\n  this.running = false\n\n  this._handlers = {start: [], frame: [], at: [], end: [], changed: []}\n  this._resetDone()\n  this._ctx = ctx\n  ctx.add && ctx.add(this)\n}\n\nconst fire = type => ({\n  [type](cb) { this._handlers[type].push(cb); return this },\n  [`_fire_${type}`](ts, currentBuild, lastBuild) {\n    const cbs = this._handlers[type]\n    const count = cbs.length\n    for (let i = 0; i !== count; ++i)\n      cbs[i].apply(this, [ts, currentBuild, lastBuild])\n  }\n})\n\nObject.assign(When.prototype, ...['start', 'frame', 'at', 'end', 'changed'].map(fire))\n\nWhen.prototype._resetDone = function() {\n  this.done = new Promise(_ => this._resolveDone = _)\n}\n\nWhen.prototype.withName = function(name) {\n  this.name = name\n  return this\n}\n\nWhen.prototype.withDuration = function(duration) {\n  this.duration = duration\n  return this\n}\n\nWhen.prototype.remove = function() {\n  this._ctx.remove(this)\n  return this\n}\n\nWhen.prototype.step = function(ts, currentBuild, lastBuild) {\n  const shouldRun = this.condition[match](ts, currentBuild, lastBuild)\n  if (shouldRun && !this.running) {\n    this._fire_start(ts, currentBuild, lastBuild)\n    this.startedAt = ts\n    this.running = true\n  }\n  if (!shouldRun && this.running) {\n    this._fire_end(ts, currentBuild, lastBuild)\n    this.endedAt = ts\n    this.running = false\n    this._resolveDone(this)\n    this._resetDone()\n  }\n  if (this.running) {\n    if (currentBuild !== lastBuild) this._fire_changed(ts, currentBuild, lastBuild)\n    this._fire_frame(ts, currentBuild, lastBuild)\n    if (typeof this.duration === 'number') {\n      const t = (ts - this.startedAt) / this.duration\n      this.t = t\n      this._fire_at(t, currentBuild, lastBuild)\n    }\n  }\n}\n\nexport const For = (duration, ctx=defaultContext) => {\n  let endTime  \n  const anim =\n    When(ts => !anim.running || ts < endTime, ctx).withDuration(duration)\n      .start(ts => endTime = ts + duration)\n      .end(() => ctx.remove(anim))\n  return anim\n}\n\nexport const every = interval => {\n  let lastTick = null\n  return cb => function (ts, currentBuild, lastBuild) {\n    const currentTick = Math.floor((ts - this.startedAt) / interval)\n    if (currentTick !== lastTick)\n      cb.apply(this, [ts, currentTick, currentBuild, lastBuild])\n    lastTick = currentTick\n  }\n}\n\n/****** Unit utilities ******/\nexport const sec = seconds => 1000 * seconds\nsec.symbol = Symbol('seconds')\nsec[Symbol.toPrimitive] = () => sec.symbol\nObject.defineProperty(Number.prototype, sec, {\n  get() { return sec(this.valueOf()) }\n})\nObject.defineProperty(String.prototype, sec, {\n  get() { return sec(+this) }\n})\n\n/****** Animation utils ******/\nexport const lerp = (from, to, map=_=>_) => {\n  const delta = to - from\n  return t => map(from + t * delta)\n}\n\n/****** Animator framework ******/\nglobal.__animators = global.__animators || []\nglobal.__cascadeDebug = (debug=true) =>\n  debug\n    ? log = console\n    : log = debuggingOff\n\nconst debuggingOff = { log() {}, table() {}, }\nlet log = debuggingOff\n\nexport function addAnimator(animator) {\n  global.__animators.push(animator)\n  log.log('added animator', animator)\n  log.table(global.__animators)\n}\nexport function removeAnimator(animator) {\n  const animators = global.__animators\n  const idx = animators.indexOf(animator)\n  if (idx >= 0)\n    animators.splice(idx, 1)\n  animator._resolveDone()\n}\nexport const runAnimatorStep = (ts, currentBuild, prevBuild) => {\n  const animators = global.__animators\n  let i = animators.length; while (i --> 0) \n    animators[i].step(ts, currentBuild, prevBuild)\n}\n\n/****** Condition helpers ******/\nexport const match = Symbol('when/match')\nObject.defineProperty(Function.prototype, match, { get() { return this } })\n\nHTMLElement.prototype[match] = function(_, current) {\n  return current === this\n}\n\nexport const buildInRange = (from, to) =>\n  (ts, current) =>\n    current &&\n    current.order >= from.order &&\n    current.order <= to.order\n\nexport const any = (...matchers) => (ts, current, next) =>\n  matchers.some(m => m [match] (ts, current, next))","import {For, sec, lerp} from './when'\n\nconst {ceil, floor} = Math\n\nclass TypeWriter extends HTMLElement {\n  static get observedAttributes() { return ['text'] }\n\n  constructor() {\n    super()\n    const shadow = this.attachShadow({mode: 'open'});\n    const text = document.createTextNode('')\n    const cursor = document.createElement('span')\n    const style = document.createElement('style')\n    style.textContent = TypeWriter.style\n    cursor.className = 'blinking cursor'\n    shadow.appendChild(style)\n    shadow.appendChild(text)\n    shadow.appendChild(cursor)\n    this.cursor = cursor\n    this.textNode = text\n    this.currentTargetText = ''\n  }\n\n  type(input, rate=this.typingRate) {\n    const {textNode: text} = this\n    const startText = text.textContent\n    if (this.anim) this.anim.remove()\n    return this.anim =\n      For(input.length [sec] / rate)\n        .withName('typing')\n        .start(() => this.cursor.classList.remove('blinking'))\n        .at(t =>\n          text.textContent = startText + input.substr(0, ceil(t * input.length))\n        )\n        .end(() => {\n          this.cursor.classList.add('blinking')\n          text.textContent = startText + input\n        })\n  }\n\n  erase(count=this.textNode.textContent.length, rate=this.erasingRate) {\n    const {textNode: text} = this\n    const startText = text.textContent\n    const length = lerp(startText.length, startText.length - count)\n    if (this.anim) this.anim.remove()\n    return this.anim =\n      For(count [sec] / rate)\n        .withName('erasing')\n        .start(() => this.cursor.classList.remove('blinking'))\n        .at(t =>\n          text.textContent = startText.substr(0, floor(length(t)))\n        )\n        .end(() => {\n          text.textContent = startText.substr(0, startText.length - count)\n          this.cursor.classList.add('blinking')\n        })\n  }\n\n  async attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'text') this.setText(newValue)\n  }\n\n  set text(newText) {\n    this.setText(newText)\n  }\n\n  get text() {\n    return this.textNode.textContent\n  }\n\n  async setText(newText) {\n    const {textNode} = this\n    if (this.currentTargetText === newText) return\n    this.currentTargetText = newText\n    const currentText = this.text\n    const prefixLength = commonPrefix(currentText, newText)\n    const delta = currentText.length - prefixLength\n    if (delta) await this.erase(delta).done\n    this.type(newText.substr(prefixLength))\n  }\n\n  get typingRate() {\n    return +getComputedStyle(this).getPropertyValue('--typewriter-typing-rate') || 32;\n  }\n\n  get erasingRate() {\n    return +getComputedStyle(this).getPropertyValue('--typewriter-erasing-rate') || 60;\n  }\n}\n\nconst commonPrefix = (a, b) => {\n  for (let i = 0; i != a.length; ++i) {\n    if(a[i] !== b[i]) return i\n  }\n  return a.length\n}\n\nTypeWriter.style = `\n.cursor {\n  display: inline-block;\n  background: var(--typewriter-cursor-color);\n  width: 2px;\n  height: 1.2em;\n  position: relative;\n  top: 0.2em;\n}\n\n.cursor.blinking {\n  animation-name: blink;\n  animation-duration: var(--typewriter-cursor-blink-rate);\n  animation-iteration-count: infinite;\n}\n\n@keyframes blink {\n  0% { opacity: 1; }\n  50% { opacity: 1; }\n  60% { opacity: 0; }\n  90% { opacity: 0; }\n  100% { opacity: 1; }\n}\n`\n\ncustomElements.define('type-writer', TypeWriter)\n\nif (module.hot) module.hot.accept(() => false)","import {defaultContext, For, every, sec} from './when'\n\nconst Seekable = MediaBase => class SeekAble extends MediaBase {\n  seekTo({duration: seekDuration=1, time=this.currentTime, playbackRate=this.playbackRate, paused=this.paused}) {\n    if (this.anim) { this.anim.remove(); this.anim = null }\n    if (!seekDuration || time < this.currentTime)\n      this.currentTime = time\n    const setFinalState = () => {\n      this.currentTime = time\n      this.playbackRate = playbackRate\n      if (typeof paused !== 'undefined')\n        paused ? this.pause() : this.play()\n    }\n    if (seekDuration && this.currentTime !== time) {\n      if (this.paused) this.play()\n      let endTime = null\n      const duration = seekDuration[sec]\n      return this.anim = For(seekDuration[sec]).withName('seekVideo')\n        .start(ts => endTime = ts + duration)\n        .frame(every(0.5[sec]) (ts => {\n          const remaining = endTime - ts\n          const delta = (time - this.currentTime)[sec]\n          const targetRate = Math.min(Math.max(delta / remaining, 0.1), 5)\n          this.playbackRate = targetRate\n        }))\n        .end(setFinalState)\n    }\n    setFinalState()\n  }\n}\n\ncustomElements.define('seekable-video', Seekable(HTMLVideoElement), {extends: 'video'})\ncustomElements.define('seekable-audio', Seekable(HTMLAudioElement), {extends: 'audio'})","import {When, For, buildInRange, always, lerp, every, sec, any, match} from './when'\nObject.assign(global, {When, For, buildInRange, always, every, sec, lerp, any, match})\n\nimport './type-writer'\nimport './seek-able'\n"],"names":["$parcel$global","globalThis","self","window","global","defaultContext","add","animator","__animators","push","log","table","remove","animators","idx","indexOf","splice","_resolveDone","always","When","condition","arguments","length","undefined","ctx","this","constructor","running","_handlers","start","frame","at","end","changed","_resetDone","_ctx","Object","assign","apply","prototype","concat","map","type","_ref","$e27fc5520f38a91f72f64843b7a2c821$var$_defineProperty","cb","ts","currentBuild","lastBuild","cbs","count","i","_this","done","Promise","_","withName","name","withDuration","duration","step","shouldRun","match","_fire_start","startedAt","_fire_end","endedAt","_fire_changed","_fire_frame","t","_fire_at","For","endTime","anim","every","interval","lastTick","currentTick","Math","floor","sec","seconds","symbol","Symbol","toPrimitive","defineProperty","Number","get","valueOf","String","lerp","from","to","delta","__cascadeDebug","debug","console","debuggingOff","Function","HTMLElement","current","ceil","TypeWriter","$b45ed699d73c12e404e92859eccf59ad$var$_classCallCheck","shadow","_super","call","attachShadow","mode","text","document","createTextNode","cursor","createElement","style","textContent","className","appendChild","textNode","currentTargetText","input","_this2","rate","typingRate","startText","$e27fc5520f38a91f72f64843b7a2c821$export$For","$e27fc5520f38a91f72f64843b7a2c821$export$sec","classList","substr","_this3","erasingRate","$e27fc5520f38a91f72f64843b7a2c821$export$lerp","oldValue","newValue","setText","newText","currentText","prefixLength","commonPrefix","erase","getComputedStyle","getPropertyValue","a","b","customElements","define","Seekable","MediaBase","_MediaBase","$ac1a7916262eb2a211ba386400284900$var$_inherits","SeekAble","$ac1a7916262eb2a211ba386400284900$var$_createSuper","$ac1a7916262eb2a211ba386400284900$var$_classCallCheck","key","value","_ref$duration","seekDuration","_ref$time","time","currentTime","_ref$playbackRate","playbackRate","_ref$paused","paused","setFinalState","pause","play","$e27fc5520f38a91f72f64843b7a2c821$export$every","remaining","targetRate","min","max","HTMLVideoElement","extends","HTMLAudioElement","$e27fc5520f38a91f72f64843b7a2c821$export$When","buildInRange","order","$e27fc5520f38a91f72f64843b7a2c821$export$always","any","_len","matchers","Array","_key","next","some","m","$e27fc5520f38a91f72f64843b7a2c821$export$match"],"version":3,"file":"elements.2b54a24b.js.map"}